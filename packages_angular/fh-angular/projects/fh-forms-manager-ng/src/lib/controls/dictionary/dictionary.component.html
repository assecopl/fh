<ng-container *ngIf="hint else selectComboMenu">
    <span ngbTooltip="{{ hint }}" [placement]="hintPlacement.toLowerCase()" [triggers]="hintTrigger.toLowerCase()">
      <ng-container *ngTemplateOutlet="selectComboMenu"></ng-container>
    </span>
</ng-container>

<ng-template #selectComboMenu>
    <ewop-input-label [inputId]="id" [label]="label" [labelPosition]="labelPosition" [labelSize]="labelSize">
        <ng-container *ngIf="control">
            <ewop-input-group [iconText]="iconText" [class.ewop-disabled]="control.disabled" [icon]="icon"
                              [iconAlignment]="iconAlignment" [required]="required">
                <ng-select #ngselect #focusElement [id]="id" availabilityControl [availabilityHtmlElement]="elementRef"
                           class="form-control {{required ? 'ng-select-required' : ''}} {{(control?.invalid && control?.touched?'is-invalid':'')}}"
                           [virtualScroll]="virtualScroll"
                           (scroll)="onScroll($event, ngselect.searchTerm)"
                           (scrollToEnd)="fetchMore(ngselect.searchTerm)"
                           [loading]="loading"
                           [typeahead]="input$"
                           [labelForId]='id'
                           loadingText="Pobieram dane..."
                           [items]="valuesBuffer"
                           [searchFn]="filterFunction"
                           [placeholder]="placeholder"
                           [readonly]="disabled"
                           [formControl]="control" (focus)="ngselect.open()"
                           (blur)="ngselect.showClear();" (change)="change.emit($event)" [selectOnTab]="true"
                           [addTag]="freeTyping ? freeTypingFn : false" addTagText="Dodaj: ">
                    <!--          <ng-container *ngIf="displayFunction || displayExpression">-->
                    <ng-template ng-header-tmp>
                        <small class="form-text text-muted"
                               *ngIf="virtualScroll && recordsCount > 0">{{valuesBuffer.length}} z {{recordsCount}}
                            rekord√≥w</small>
                    </ng-template>
                    <ng-template ng-option-tmp ng-label-tmp let-item="item" let-index="index" let-search="searchTerm">
                        <span [innerHTML]=" inputFormatter(item) | ewopml "></span>
                    </ng-template>

                    <!--          </ng-container>-->
                </ng-select>
            </ewop-input-group>
        </ng-container>
    </ewop-input-label>
</ng-template>
