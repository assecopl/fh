<ng-container *ngIf="hint; else selectComboMenu">
  <span
    ngbTooltip="{{ hint }}"
    [placement]="hintPlacement.toLowerCase()"
    [triggers]="hintTrigger.toLowerCase()"
  >
    <ng-container *ngTemplateOutlet="selectComboMenu"></ng-container>
  </span>
</ng-container>

<ng-template #selectComboMenu>
  <fhng-input-label
    [inputId]="id"
    [label]="label"
    [labelPosition]="labelPosition"
    [labelSize]="labelSize"
    [hint]="hint"
    [hintTrigger]="hintTrigger"
    [hintType]="hintType"
    [hintPlacement]="hintPlacement"
    [hintTitle]="hintTitle"
  >
    <ng-container *ngIf="control">
      <fhng-input-group
        [iconText]="iconText"
        [class.fhng-disabled]="control.disabled"
        [icon]="icon"
        [iconAlignment]="iconAlignment"
        [required]="required"
      >
        <ng-select
          #focusElement
          [id]="innerId"
          availabilityControl
          [availabilityHtmlElement]="elementRef"
          class="form-control {{ required ? 'ng-select-required' : '' }} {{
            control?.invalid && control?.touched ? 'is-invalid' : ''
          }}"
          [items]="values"
          [searchFn]="filterFunction"
          [placeholder]="placeholder"
          [labelForId]="id"
          [readonly]="disabled"
          [formControl]="control"
          [addTag]="freeTyping"
          [isOpen]="isOpen"
          (click)="toggleOptionsViewOnClick($event?.target)"
          (search)="toggleOptionsViewOnInput($event)"
          (blur)="closeOptionsView()"
          (clear)="closeOptionsView()"
          (change)="closeOptionsView()"
        >
          <ng-container *ngIf="displayFunction">
            <ng-template
              ng-option-tmp
              ng-label-tmp
              let-item="item"
              let-index="index"
              let-search="searchTerm"
            >
              {{ freeTyping ? item : displayFunction(item) }}
            </ng-template>
          </ng-container>
        </ng-select>
      </fhng-input-group>
    </ng-container>
  </fhng-input-label>
</ng-template>
