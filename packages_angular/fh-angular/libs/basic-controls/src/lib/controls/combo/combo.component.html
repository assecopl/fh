<ng-container *ngIf="hint; else combo">
  <span
    ngbTooltip="{{ hint }}"
    [placement]="hintPlacement.toLowerCase()"
    [triggers]="hintTrigger.toLowerCase()"
  >
    <ng-container *ngTemplateOutlet="combo"></ng-container>
  </span>
</ng-container>

<ng-template #combo>
  <div fhng-input-label
    [inputId]="id"
    [label]="label"
    [labelPosition]="labelPosition"
    [labelSize]="labelSize"
    [hint]="hint"
    [hintTrigger]="hintTrigger"
    [hintType]="hintType"
    [hintPlacement]="hintPlacement"
    [hintTitle]="hintTitle"
  >
    <div fhng-input-group
        [iconText]="iconText"
         [class.fh-disabled]="disabled"
        [icon]="icon"
        [iconAlignment]="iconAlignment"
        [required]="required"
      >
      <ng-select appendTo="body" [ngModel]="rawValue" (change)="updateModel($event)" (clear)="onClear($event)"
          #focusElement
          [id]="innerId"
          availabilityControl
                 class="form-control combo fc"
                 [items]="values"
          [searchFn]="filterFunction"
          [labelForId]="id"
                 [multiple]="multiselect"
          [placeholder]="placeholder"
          [readonly]="disabled"
                 [selectOnTab]="true"
                 [compareWith]="ngSelectCompareFunction"
                 groupBy="group"
        >
        <ng-template ng-optgroup-tmp let-item="item" let-index="index">
          <span class="dropdown-header">{{item.group}}</span>
        </ng-template>
          <ng-template
            ng-option-tmp
            ng-label-tmp
            let-item="item"
            let-index="index"
            let-search="searchTerm"
          >
            <span [innerHTML]="inputFormatter(item) | fhml"></span>
            <span tabindex="0" (click)="removeItem(item, $event)" role="button"
                  [title]="'fh.combo.element.delete' | i18n"
                  [attr.aria-label]="'fh.combo.element.delete' | i18n" class="combo-clear-element fa fa-times"></span>
          </ng-template>
        </ng-select>
    </div>
  </div>
</ng-template>
<!--<div class="row">-->
<!--  <div class="col-md-6">-->
<!--    <pre>-->
<!--rawValue : {{rawValue | json}} <br>-->
<!--multiselectRawValue : {{multiselectRawValue | json}} <br>-->
<!--</pre>-->
<!--  </div>-->
<!--  <div class="col-md-6">-->
<!--    <pre>-->
<!--values : {{values | json}} <br>-->
<!--</pre>-->
<!--  </div>-->
<!--</div>-->

<ng-container *ngIf="configuration.debug">
  <fh-component-debugger/>
</ng-container>

